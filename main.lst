(C)Copyright TOSHIBA CORPORATION 1993-2009  All rights reserved
Sun Jun 07 21:03:10 2020
TLCS-900 Relocatable Assembler (32) V2.2k  [Page     1]  main.lst
Runtime option : c:\Program Files (x86)\TOSHIBA\T900\bin\asm900.exe -Nb2 -O1 -g -l main.asm

Location  Object                           Ins        Line Source Statement

                                 +0          1           1 ;*****************************************
                                 +0          2           2 ;	Main Program 
                                 +0          3           3 ;*****************************************
                                 +0          4           4 	$MAXIMUM
                                 +0          5           5 	module game_main
                                 +0          6           6 
                                 +0          7           7 ;  ---------------------------------
                                 +0          8           8 ;	EXTERNAL LOOK UP
                                 +0          9           9 ;  ---------------------------------
                                 +0         10          10 	extern SYS_PATCH
                                 +0         11          11 	extern SYSTEM_CALL
                                 +0         12          12 	extern init_setting
                                 +0         13          13 
                                 +0         14          14 ;  ---------------------------------
                                 +0         15          15 ;   EXTERNAL DEFINITION
                                 +0         16          16 ;  ---------------------------------
                                 +0         17          17 	public reset,v_int,h_int,dummy,timer1,timer2
                                 +0         18          18 	public alarm_int,z80_int,sound_int
                                 +0         19          19 
                                 +0         20          20 ;  ---------------------------------
                                 +0         21          21 ;	INCLUDE
                                 +0         22          22 ;  ---------------------------------
                                 +0         23          23 	$include "system.inc"
                                 +1          1          24 ;-----------------------------------------------------------------
                                 +1          2          25 
                                 +1          3          26 ;	SYSTEM CALL
                                 +1          4          27 
                                 +1          5          28 ;-----------------------------------------------------------------
                                 +1          6          29 
  00000000                       +1          7          30 SYS_SUCCESS		equ	0x00			;run success
                                 +1          8          31 
  000000FF                       +1          9          32 SYS_FAILURE		equ	0xff			;run failure
                                 +1         10          33 
                                 +1         11          34 ;-----------------------------------------------------------------
                                 +1         12          35 
  00000000                       +1         13          36 VECT_SHUTDOWN		equ	0x00			;shutdown (power OFF)
                                 +1         14          37 
  00000001                       +1         15          38 VECT_CLOCKGEARSET	equ	0x01			;clock gear change
                                 +1         16          39 
  00000002                       +1         17          40 VECT_RTCGET		equ	0x02			;obtain time
                                 +1         18          41 
  00000004                       +1         19          42 VECT_INTLVSET		equ	0x04			;set interrupt level
                                 +1         20          43 
  00000005                       +1         21          44 VECT_SYSFONTSET	equ	0x05			;set system font
                                 +1         22          45 
  00000006                       +1         23          46 VECT_FLASHWRITE	equ	0x06			;flash memory data write
                                 +1         24          47 
  00000007                       +1         25          48 VECT_FLASHALLERS	equ	0x07			;flash memory erase all blocks
                                 +1         26          49 
  00000008                       +1         27          50 VECT_FLASHERS		equ	0x08			;flash memory erase specified blocks
                                 +1         28          51 
  00000009                       +1         29          52 VECT_ALARMSET		equ	0x09			;game alarm setting
                                 +1         30          53 
  0000000B                       +1         31          54 VECT_ALARMDOWNSET	equ	0x0b			;alarm setting during shutdown
                                 +1         32          55 
  0000000D                       +1         33          56 VECT_FLASHPROTECT	equ	0x0d			;protect using tool
                                 +1         34          57 
  0000000E                       +1         35          58 VECT_GEMODESET	equ	0x0e			;switching GE mode
                                 +1         36          59 
                                 +1         37          60 ;-----------------------------------------------------------------
                                 +1         38          61 
                                 +1         39          62 ;	SYSTEM BIT EQU
                                 +1         40          63 
                                 +1         41          64 ;-----------------------------------------------------------------
                                 +1         42          65 
  00000007                       +1         43          66 INT_CLR_BIT		equ	0x07			;interrupt request clear bit
                                 +1         44          67 
  00000080                       +1         45          68 _INT_CLR_BIT		equ	0y10000000		;
                                 +1         46          69 
                                 +1         47          70 ;-----------------------------------------------------------------
                                 +1         48          71 
                                 +1         49          72 ;	SYSTEM WORK
                                 +1         50          73 
                                 +1         51          74 ;-----------------------------------------------------------------
                                 +1         52          75 
  00006F80                       +1         53          76 Battery_Voltage	equ	0x6f80			;estimated voltage
                                 +1         54          77 
  00006F82                       +1         55          78 Sys_lever		equ	0x6f82			;lever value
                                 +1         56          79 
  00006F87                       +1         57          80 Language		equ	0x6f87			;language chosen
                                 +1         58          81 
  00006F85                       +1         59          82 User_Shutdown		equ	0x6f85			;shutdown re1uest bit
                                 +1         60          83 
  00006F84                       +1         61          84 User_Boot		equ	0x6f84			;startup bit flag
                                 +1         62          85 
  00006F86                       +1         63          86 User_Answer		equ	0x6f86			;user request bit
                                 +1         64          87 
  00006F91                       +1         65          88 OS_Version		equ	0x6f91			;system version reserve work
                                 +1         66          89 
                                 +1         67          90 ;-----------------------------------------------------------------
                                 +1         68          91 
                                 +1         69          92 ;	WATCH DOG
                                 +1         70          93 
                                 +1         71          94 ;-----------------------------------------------------------------
                                 +1         72          95 
  0000006F                       +1         73          96 WDCR			equ	0x06F		;watch dog control address
                                 +1         74          97 
  0000004E                       +1         75          98 WD_CLR			equ	0x04e		;watch dog clear code
                                 +1         76          99 
                                 +1         77         100 ;-----------------------------------------------------------------
                                 +1         78         101 
                                 +1         79         102 ;	SYSTEM WORK BIT
                                 +1         80         103 
                                 +1         81         104 ;-----------------------------------------------------------------
                                 +1         82         105 
  00000001                       +1         83         106 JOY_UP 		equ 0x1
  00000002                       +1         84         107 JOY_DOWN 	equ 0x2
  00000004                       +1         85         108 JOY_LEFT 	equ 0x4
  00000008                       +1         86         109 JOY_RIGHT 	equ 0x8
  00000010                       +1         87         110 JOY_A		equ 0x10
  00000020                       +1         88         111 JOY_B		equ 0x20
  00000040                       +1         89         112 JOY_OPTION	equ 0x40
                                 +1         90         113 
  00000000                       +1         91         114 BIT_UP		equ 0
  00000001                       +1         92         115 BIT_DOWN	equ 1
  00000002                       +1         93         116 BIT_LEFT	equ 2
  00000003                       +1         94         117 BIT_RIGHT	equ 3
  00000004                       +1         95         118 BIT_A		equ 4
  00000005                       +1         96         119 BIT_B		equ 5
  00000006                       +1         97         120 BIT_OPTION	equ 6
                                 +1         98         121 
                                 +1         99         122 ;======================================================= 
                                 +1        100         123 
                                 +1        101         124 ;	USER START UP BIT
                                 +1        102         125 
                                 +1        103         126 ;======================================================= 
                                 +1        104         127 
                                 +1        105         128 ;User_Boot
                                 +1        106         129 
                                 +1        107         130 ;	00000000
                                 +1        108         131 
                                 +1        109         132 ;	||+------ resume startup			0:not resume startup		1:resume startup
                                 +1        110         133 
                                 +1        111         134 ;	|+------- POWER startup			0:not POWER startup		1:POWER startup
                                 +1        112         135 
                                 +1        113         136 ;	+-------- alarm startup			0:not alarm statup		1:alarm statup
                                 +1        114         137 
                                 +1        115         138 ;	=================================================
                                 +1        116         139 
                                 +1        117         140 
                                 +1        118         141 
  00000007                       +1        119         142 ALARM_BOOT_REQ		equ	0x07
                                 +1        120         143 
  00000006                       +1        121         144 POWER_BOOT_REQ		equ	0x06
                                 +1        122         145 
  00000005                       +1        123         146 RESUME_BOOT_REQ		equ	0x05
                                 +1        124         147 
  00000080                       +1        125         148 _ALARM_BOOT_REQ		equ	0y10000000
                                 +1        126         149 
  00000040                       +1        127         150 _POWER_BOOT_REQ		equ	0y01000000
                                 +1        128         151 
  00000020                       +1        129         152 _RESUME_BOOT_REQ	equ	0y00100000
                                 +1        130         153 
                                 +1        131         154 
                                 +1        132         155 
                                 +1        133         156 ;======================================================= 
                                 +1        134         157 
                                 +1        135         158 ;	USER SHUTDOWN BIT
                                 +1        136         159 
                                 +1        137         160 ;======================================================= 
                                 +1        138         161 
                                 +1        139         162 ;User_Shutdown
                                 +1        140         163 
                                 +1        141         164 ;	00000000
                                 +1        142         165 
                                 +1        143         166 ;	||+--------- main power use shutdown request	0:no request	1:request
                                 +1        144         167 
                                 +1        145         168 ;	|+---------- no use shutdown request		0:no request	1:request
                                 +1        146         169 
                                 +1        147         170 ;	+----------- power off shutdown request		0:no request	1:request
                                 +1        148         171 
                                 +1        149         172 ;	=================================================
                                 +1        150         173 
                                 +1        151         174 
                                 +1        152         175 
  00000007                       +1        153         176 MP_SHUTDOWN_REQ	equ	0x07
                                 +1        154         177 
  00000006                       +1        155         178 TIME_SHUTDOWN_REQ	equ	0x06
                                 +1        156         179 
  00000005                       +1        157         180 BAT_SHUTDOWN_REQ	equ	0x05
                                 +1        158         181 
  00000080                       +1        159         182 _MP_SHUTDOWN_REQ	equ	0y10000000
                                 +1        160         183 
  00000040                       +1        161         184 _TIME_SHUTDOWN_REQ	equ	0y01000000
                                 +1        162         185 
  00000020                       +1        163         186 _BAT_SHUTDOWN_REQ	equ	0y00100000
                                 +1        164         187 
                                 +1        165         188 
                                 +1        166         189 
                                 +1        167         190 ;======================================================= 
                                 +1        168         191 
                                 +1        169         192 ;	USER ANSWER BIT
                                 +1        170         193 
                                 +1        171         194 ;======================================================= 
                                 +1        172         195 
                                 +1        173         196 ;User_Answer
                                 +1        174         197 
                                 +1        175         198 ;	00000000
                                 +1        176         199 
                                 +1        177         200 ;	|+----------- no use shutdown operation	0:non-existent	1:exists
                                 +1        178         201 
                                 +1        179         202 ;	+------------ resume operation		0:non-existent	1:exists
                                 +1        180         203 
                                 +1        181         204 ;	=================================================
                                 +1        182         205 
                                 +1        183         206 
                                 +1        184         207 
  00000007                       +1        185         208 RESUME_ANS		equ	0x07
                                 +1        186         209 
  00000006                       +1        187         210 TIMER_SHUTDOWN_ANS	equ	0x06
                                 +1        188         211 
  00000080                       +1        189         212 _RESUME_ANS		equ	0y10000000
                                 +1        190         213 
  00000040                       +1        191         214 _TIMER_SHUTDOWN_ANS	equ	0y01000000
                                 +1        192         215 
                                 +0         24         216 	$include "k1head.inc"
                                 +1          1         217 ;=======================================================
                                 +1          2         218 
                                 +1          3         219 ;		SYSTEM RELATED EQU
                                 +1          4         220 
                                 +1          5         221 ;=======================================================
                                 +1          6         222 
  00008000                       +1          7         223 DISP_CTL0		EQU	0x08000			;interrupt control register
                                 +1          8         224 
                                 +1          9         225 ;D7 : 1 = Vint allowed / 0 = not allowed
                                 +1         10         226 
                                 +1         11         227 ;D6 : 1 = Hint allowed / 0 = not allowed
                                 +1         12         228 
                                 +1         13         229 
                                 +1         14         230 
  00008010                       +1         15         231 STS_RG_ADD		EQU	0x08010			;2D status register (READ)
                                 +1         16         232 
                                 +1         17         233 ;D7 : 1 = character over / 0 = no character over
                                 +1         18         234 
                                 +1         19         235 ;D6 : 1 = while V blanking / 0 = while in display mode
                                 +1         20         236 
                                 +1         21         237 
                                 +1         22         238 
  00008012                       +1         23         239 LCD_CTR_ADD		EQU	0x08012			;2D control register
                                 +1         24         240 
                                 +1         25         241 ;D7 : 1 = screen color inverse display / 0 = normal display
                                 +1         26         242 
                                 +1         27         243 ;D2`D0 : outside window frame color CODE
                                 +1         28         244 
                                 +1         29         245 
                                 +1         30         246 
  00008118                       +1         31         247 BG_COLOR		EQU 0x08118			;Background color register
                                 +1         32         248 
                                 +1         33         249 ;D7`D6: BGON. D7 = 1, D6 = 0: Use specified BG color. Defaults to D7/D6 both 0
                                 +1         34         250 
                                 +1         35         251 ;D2`D0: BG color code
                                 +1         36         252 
                                 +1         37         253 
                                 +1         38         254 
                                 +1         39         255 
  000087E0                       +1         40         256 RESET_ADD		EQU	0X087E0			;2D software reset (WRITE)
                                 +1         41         257 
                                 +1         42         258 ;2D cicuit initialization with "52" write
                                 +1         43         259 
                                 +1         44         260 
                                 +1         45         261 
  000087FE                       +1         46         262 VERSION_ADD		EQU	0x087FE			;2D cicuit version (READ)
                                 +1         47         263 
                                 +1         48         264 ;D7 : 1 = white LCD panel /0 = balck LCD panel 
                                 +1         49         265 
                                 +1         50         266 ;D5`D0 : 2D circuit version
                                 +1         51         267 
                                 +1         52         268 
                                 +1         53         269 
                                 +1         54         270 
                                 +1         55         271 
                                 +1         56         272 ;=======================================================
                                 +1         57         273 
                                 +1         58         274 ;		CHARACTER EQU
                                 +1         59         275 
                                 +1         60         276 ;=======================================================
                                 +1         61         277 
  0000A000                       +1         62         278 CHR_VRAM		EQU	0x0A000			;character data RAM address
                                 +1         63         279 
                                 +1         64         280 
                                 +1         65         281 
                                 +1         66         282 
                                 +1         67         283 
                                 +1         68         284 ;=======================================================
                                 +1         69         285 
                                 +1         70         286 ;		SCROLL EQU
                                 +1         71         287 
                                 +1         72         288 ;=======================================================
                                 +1         73         289 
  00009000                       +1         74         290 SCRL1_VRAM		EQU	0x09000
                                 +1         75         291 
  00009800                       +1         76         292 SCRL2_VRAM		EQU	0x09800
                                 +1         77         293 
                                 +1         78         294 
                                 +1         79         295 
  00008030                       +1         80         296 SCRL_PRIO_ADR		EQU	0X08030			;scroll priority level invert register 
                                 +1         81         297 
  00008032                       +1         82         298 SCRL_X1_ADR		EQU	0x08032			;scroll 1 offset H register
                                 +1         83         299 
  00008033                       +1         84         300 SCRL_Y1_ADR		EQU	0x08033			;scroll 1 offset V register
                                 +1         85         301 
  00008034                       +1         86         302 SCRL_X2_ADR		EQU	0x08034			;scroll 2 offset H register
                                 +1         87         303 
  00008035                       +1         88         304 SCRL_Y2_ADR		EQU	0x08035			;scroll 2 offset V register
                                 +1         89         305 
                                 +1         90         306 
                                 +1         91         307 
                                 +1         92         308 ;=======================================================
                                 +1         93         309 
                                 +1         94         310 ;		SPRITE EQU
                                 +1         95         311 
                                 +1         96         312 ;=======================================================
                                 +1         97         313 
  00008800                       +1         98         314 SPR_VRAM		EQU	0x08800
                                 +1         99         315 
  00008020                       +1        100         316 SPR_OFFSET_X_ADR	EQU	0x08020			;sprite offset H
                                 +1        101         317 
  00008021                       +1        102         318 SPR_OFFSET_Y_ADR	EQU	0x08021			;sprite offset V
                                 +1        103         319 
  00008C00                       +1        104         320 SPR_PALCODE EQU 0x8C00 ;what palette # to use for each sprite 
                                 +1        105         321 
                                 +1        106         322 
                                 +1        107         323 
                                 +1        108         324 
                                 +1        109         325 ;=======================================================
                                 +1        110         326 
                                 +1        111         327 ;		WINDOW SYSTEM EQU
                                 +1        112         328 
                                 +1        113         329 ;=======================================================
                                 +1        114         330 
  00008002                       +1        115         331 WIN_WBAX_ADR		EQU	0x08002			;window origin H
                                 +1        116         332 
  00008003                       +1        117         333 WIN_WBAY_ADR		EQU	0x08003			;window origin V
                                 +1        118         334 
  00008004                       +1        119         335 WIN_WSIX_ADR		EQU	0x08004			;window size H
                                 +1        120         336 
  00008005                       +1        121         337 WIN_WSIY_ADR		EQU	0x08005			;window size V
                                 +1        122         338 
                                 +1        123         339 
                                 +1        124         340 
  00008008                       +1        125         341 WD_LCDST_HPOS		EQU	0x08008			;raster H position register (READ)
                                 +1        126         342 
  00008009                       +1        127         343 WD_LCDST_VPOS		EQU	0x08009			;raster V position register (READ)
                                 +1        128         344 
                                 +1        129         345 
                                 +1        130         346 
                                 +1        131         347 ;=======================================================
                                 +1        132         348 
                                 +1        133         349 ;		PALETTE EQU
                                 +1        134         350 
                                 +1        135         351 ;=======================================================
                                 +1        136         352 
                                 +1        137         353 ;sprite palette 0
                                 +1        138         354 
  00008101                       +1        139         355 PL_SPR_00		EQU	0x08101	
                                 +1        140         356 
  00008102                       +1        141         357 PL_SPR_01		EQU	0x08102
                                 +1        142         358 
  00008103                       +1        143         359 PL_SPR_02		EQU	0x08103
                                 +1        144         360 
                                 +1        145         361 ;sprite palette 1
                                 +1        146         362 
  00008105                       +1        147         363 PL_SPR_10		EQU	0x08105
                                 +1        148         364 
  00008106                       +1        149         365 PL_SPR_11		EQU	0x08106
                                 +1        150         366 
  00008107                       +1        151         367 PL_SPR_12		EQU	0x08107
                                 +1        152         368 
                                 +1        153         369 
                                 +1        154         370 
                                 +1        155         371 ;scroll 0 palette 0
                                 +1        156         372 
  00008109                       +1        157         373 PL_SCR0_00		EQU	0x08109
                                 +1        158         374 
  0000810A                       +1        159         375 PL_SCR0_01		EQU	0x0810A
                                 +1        160         376 
  0000810B                       +1        161         377 PL_SCR0_02		EQU	0x0810B
                                 +1        162         378 
                                 +1        163         379 ;scroll 0 palette 1
                                 +1        164         380 
  0000810D                       +1        165         381 PL_SCR0_10		EQU	0x0810D
                                 +1        166         382 
  0000810E                       +1        167         383 PL_SCR0_11		EQU	0x0810E
                                 +1        168         384 
  0000810F                       +1        169         385 PL_SCR0_12		EQU	0x0810F
                                 +1        170         386 
                                 +1        171         387 ;scroll 1 palette 0
                                 +1        172         388 
  00008111                       +1        173         389 PAL_SCR1_00		EQU	0x08111
                                 +1        174         390 
  00008112                       +1        175         391 PAL_SCR1_01		EQU	0x08112
                                 +1        176         392 
  00008113                       +1        177         393 PAL_SCR1_02		EQU	0x08113
                                 +1        178         394 
                                 +1        179         395 ;scroll 1 palette 1
                                 +1        180         396 
  00008115                       +1        181         397 PAL_SCR1_10		EQU	0x08115
                                 +1        182         398 
  00008116                       +1        183         399 PAL_SCR1_11		EQU	0x08116
                                 +1        184         400 
  00008117                       +1        185         401 PAL_SCR1_12		EQU	0x08117
                                 +1        186         402 
                                 +1        187         403 
                                 +1        188         404 ;=======================================================
                                 +1        189         405 
                                 +1        190         406 ;		COLOR PALETTE RAM EQU
                                 +1        191         407 
                                 +1        192         408 ;=======================================================
                                 +1        193         409 
  00008200                       +1        194         410 SPRITE_CRAM		EQU 0x08200
                                 +1        195         411 
  00008280                       +1        196         412 SCROLL1_CRAM	EQU 0x08280
                                 +1        197         413 
  00008300                       +1        198         414 SCROLL2_CRAM	EQU 0x08300
                                 +1        199         415 
  000083E0                       +1        200         416 BGCOL_CRAM		EQU 0x083E0 ;for the background color
                                 +1        201         417 
  000083F0                       +1        202         418 WINDOW_CRAM		EQU 0x083F0
                                 +1        203         419 
                                 +1        204         420 
                                 +1        205         421 ;=======================================================
                                 +1        206         422 
                                 +1        207         423 ;		TIMER EQU
                                 +1        208         424 
                                 +1        209         425 ;=======================================================
                                 +1        210         426 
  00000020                       +1        211         427 T8RUN	EQU 0x0020 ;bitmask controlling 8 bit timers
                                 +1        212         428 
                                 +1        213         429 
                                 +1        214         430 
                                 +1        215         431 ;=======================================================
                                 +0         25         432 	$include "glbwork.inc"
                                 +1          1         433 ;================================================================
                                 +1          2         434 ; global vars
                                 +1          3         435 ;================================================================
                                 +1          4         436 
                                 +1          5         437 	extern medium start_work
                                 +1          6         438 	extern medium stopper ; keeps main loop spinning until vblank (byte)
                                 +1          7         439 	extern medium joypad ;joypad bitmask (byte)
                                 +1          8         440 	extern medium joylast ;last frame's joypad bitmask (byte)
                                 +1          9         441 	extern medium joyedge ;what buttons were pressed this frame (byte)
                                 +1         10         442 	extern medium hint_cnt ;how many times horizontal interrupt has fired (byte)
                                 +1         11         443 	extern medium frame_cnt ; counts number of frames (word)
                                 +1         12         444 	
                                 +1         13         445 	extern medium scroll_x ;scroll x pos (word)
                                 +1         14         446 	extern medium scroll_y ;scroll y pos (word)
                                 +1         15         447 	
                                 +1         16         448 	extern medium player_x ;player x pos (long)
                                 +1         17         449 	extern medium player_y ;player y pos (long)
                                 +1         18         450 	extern medium player_dx ;long
                                 +1         19         451 	extern medium player_dy ;long
                                 +1         20         452 ;================================================================
                                 +1         21         453 
                                 +0         26         454 	$include "game.inc"
                                 +1          1         455 ;================================================================
                                 +1          2         456 ; GAME EQU
                                 +1          3         457 ;================================================================
                                 +1          4         458 
  000000A0                       +1          5         459 disp_size_x		EQU	160		; X screen size
                                 +1          6         460 
  00000098                       +1          7         461 disp_size_y		EQU	152		; Y screen size
                                 +1          8         462 
  00000040                       +1          9         463 obj_max		EQU	64		; number of maximum sprites
                                 +1         10         464 
                                 +1         11         465 ;================================================================
                                 +1         12         466 
                                 +0         27         467 	$include "print.inc"
                                 +1          1         468 ;*****************************************
                                 +1          2         469 ;	Print functions 
                                 +1          3         470 ;*****************************************
                                 +1          4         471 
                                 +1          5         472 ;-------------------------------------------------------
                                 +1          6         473 ; print_init: loads system font into first half of vram
                                 +1          7         474 ;-------------------------------------------------------
                                 +1          8         475 	extern print_init
                                 +1          9         476 
                                 +1         10         477 ;-------------------------------------------------------
                                 +1         11         478 ; print_string
                                 +1         12         479 ;-------------------------------------------------------
                                 +1         13         480 ; xix: pointer to null terminated text
                                 +1         14         481 ; wa: x pos
                                 +1         15         482 ; bc: y pos
                                 +1         16         483 ;-------------------------------------------------------
                                 +1         17         484 	extern print_string
                                 +1         18         485 	
                                 +1         19         486 ;-------------------------------------------------------
                                 +1         20         487 ; print_byte
                                 +1         21         488 ;-------------------------------------------------------
                                 +1         22         489 ; xix: pointer to byte to print
                                 +1         23         490 ; wa: x pos
                                 +1         24         491 ; bc: y pos
                                 +1         25         492 ;-------------------------------------------------------
                                 +1         26         493 	extern print_byte
                                 +1         27         494 	
                                 +1         28         495 ;-------------------------------------------------------
                                 +1         29         496 ; print_word	
                                 +1         30         497 ;-------------------------------------------------------
                                 +1         31         498 ; xix: pointer to word to print
                                 +1         32         499 ; wa: x pos
                                 +1         33         500 ; bc: y pos
                                 +1         34         501 ;-------------------------------------------------------
                                 +1         35         502 	extern print_word
                                 +0         28         503 	$include "graphics.inc"
                                 +1          1         504 ;*****************************************
                                 +1          2         505 ;	Graphics data 
                                 +1          3         506 ;*****************************************
                                 +1          4         507 
                                 +1          5         508 	extern palette
                                 +1          6         509 	extern palette_end
                                 +1          7         510 	extern tiles
                                 +1          8         511 	extern tiles_end
                                 +1          9         512 	extern map
                                 +1         10         513 	extern map_end
                                 +1         11         514 	extern hills
                                 +1         12         515 	extern hills_end
                                 +1         13         516 	extern hills_map
                                 +1         14         517 	extern hills_map_end
                                 +1         15         518 	extern hills_pal
                                 +1         16         519 	extern hills_pal_end
                                 +1         17         520 	extern guy
                                 +1         18         521 	extern guy_end
                                 +1         19         522 	extern guy_pal
                                 +1         20         523 	extern guy_pal_end
                                 +0         29         524 	$include "scroll.inc"
                                 +1          1         525 ;-------------------------------------------------------
                                 +1          2         526 ; scroll_set: set scroll to specified coords
                                 +1          3         527 ;-------------------------------------------------------
                                 +1          4         528 ; wa: x pos
                                 +1          5         529 ; bc: y pos
                                 +1          6         530 ;-------------------------------------------------------
                                 +1          7         531 extern scroll_set
                                 +1          8         532 
                                 +1          9         533 ;-------------------------------------------------------
                                 +1         10         534 ; scroll_get_tile: returns tile # at given coordinates in wa
                                 +1         11         535 ;-------------------------------------------------------
                                 +1         12         536 ; wa: x pos
                                 +1         13         537 ; bc: y pos
                                 +1         14         538 ;-------------------------------------------------------
                                 +1         15         539 extern scroll_get_tile
                                 +1         16         540 
                                 +1         17         541 ;-------------------------------------------------------
                                 +1         18         542 ; scroll_copy: carry out scroll changes made in scroll_set (run during vblank)
                                 +1         19         543 ;-------------------------------------------------------
                                 +1         20         544 extern scroll_copy
                                 +0         30         545 	$include "player.inc"
                                 +1          1         546 ;-------------------------------------------------------
                                 +1          2         547 ; player_init: initialize player sprite
                                 +1          3         548 ;-------------------------------------------------------	
                                 +1          4         549 extern player_init
                                 +1          5         550 ;-------------------------------------------------------
                                 +1          6         551 ; player_move: handle player movement
                                 +1          7         552 ;-------------------------------------------------------
                                 +1          8         553 extern player_move
                                 +0         31         554 
                                 +0         32         555 
                                 +0         33         556 ;-------------------------------------------------------
                                 +0         34         557 PROG section code large
                                 +0         35         558 ;-------------------------------------------------------
                                 +0         36         559 
                                 +0         37         560 		public	__STARTUP
  00FF1800                       +0         38         561 __STARTUP	equ	0xff1800
                                 +0         39         562 ;-------------------------------------------------------
                                 +0         40         563 ; entry point			
                                 +0         41         564 ;-------------------------------------------------------
00000000                         +0         42         565 reset:
00000000  1D000000             R +0         43         566 	cal	SYS_PATCH ;called during init to assist with power functionality
                                 +0         44         567 ;------------------- INITIALIZATION --------------------
00000004  1D000000             R +0         45         568 	cal init_setting ;VRAM, work initialization
                                 +0         46         569 	; cal print_init ;load system font
00000008  0600                   +0         47         570 	ei 0 ;allow interrupts with a priority >= 0
                                 +0         48         571 
                                 +0         49         572 	;---copy palette---
0000000A  F200000035           R +0         50         573 	lda xiy,palette
0000000F  F1808234               +0         51         574 	lda xix,SCROLL1_CRAM
00000013  4100000000           R +0         52         575 	ldl xbc,palette_end-palette ;should be a ldw but needs to be an ldl
00000018                         +0         53         576 palette_copy:                   ;to appease the assembler
00000018  D5F520                 +0         54         577 	ldw wa,(xiy+)
0000001B  F5F150                 +0         55         578 	ldw (xix+),wa
0000001E  D91CF7                 +0         56         579 	djnz bc,palette_copy	
                                 +0         57         580 	;---copy hill palette to bg 2---
00000021  F200000035           R +0         58         581 	lda xiy,hills_pal
00000026  F1008334               +0         59         582 	lda xix,SCROLL2_CRAM
0000002A  4100000000           R +0         60         583 	ldl xbc,hills_pal_end-hills_pal
0000002F                         +0         61         584 palette_copy2:
0000002F  D5F520                 +0         62         585 	ldw wa,(xiy+)
00000032  F5F150                 +0         63         586 	ldw (xix+),wa
00000035  D91CF7                 +0         64         587 	djnz bc,palette_copy2
                                 +0         65         588 
                                 +0         66         589 	; ;---set bg color---	
00000038  30850F                 +0         67         590 	ldw wa,0xf85
0000003B  F1E08350               +0         68         591 	ldw (0x83e0),wa
0000003F  2180                   +0         69         592 	ldb a,0x80 ;bg color on, first color in cram
00000041  F1188141               +0         70         593 	ldb (0x8118),a	
                                 +0         71         594 	
                                 +0         72         595 	;---copy tiles---
                                 +0         73         596 	
00000045  F200000035           R +0         74         597 	lda xiy,tiles
0000004A  F100A034               +0         75         598 	lda xix,CHR_VRAM
0000004E  4100000000           R +0         76         599 	ldl xbc,tiles_end-tiles
00000053  8511                   +0         77         600 	ldir (xix+),(xiy+)
                                 +0         78         601 	
00000055  F200000035           R +0         79         602 	lda xiy,hills
0000005A  F100AA34               +0         80         603 	lda xix,CHR_VRAM+0xA00
0000005E  4100000000           R +0         81         604 	ldl xbc,hills_end-hills
00000063  8511                   +0         82         605 	ldir (xix+),(xiy+)
                                 +0         83         606 	
                                 +0         84         607 	
                                 +0         85         608 	;---copy map---
                                 +0         86         609 	
00000065  F1009034               +0         87         610 	lda xix,SCRL1_VRAM
00000069  F200000035           R +0         88         611 	lda xiy,map
0000006E  2413                   +0         89         612 	ldb d,19 ;19 rows
00000070                         +0         90         613 map_copy:	
00000070  312800                 +0         91         614 	ldw bc,40 ;40 bytes per row (20 columns * 2 bytes per tile)
00000073                         +0         92         615 copy_row:
00000073  8511                   +0         93         616 	ldir (xix+),(xiy+)
00000075  DCC81800               +0         94         617 	addw ix,64-40
00000079  DDC85800               +0         95         618 	addw iy,128-40
0000007D  CC1CF0                 +0         96         619 	djnz d,map_copy	
                                 +0         97         620 	
00000080  F200000035           R +0         98         621 	lda xiy,hills_map
00000085  F1009834               +0         99         622 	lda xix,SCRL2_VRAM
00000089  4100040000             +0        100         623 	ldl xbc,32*32
0000008E                         +0        101         624 map2_loop: ;have to add 160 to each tile because 160 tiles in the foreground
0000008E  D5F520                 +0        102         625 	ldw wa,(xiy+)
00000091  D8C8A000               +0        103         626 	addw wa,160
00000095  F5F150                 +0        104         627 	ldw (xix+),wa
00000098  D91CF3                 +0        105         628 	djnz bc,map2_loop
0000009B  1D000000             R +0        106         629 	cal player_init
                                 +0        107         630 	
                                 +0        108         631 ;-------------------------------------------------------
                                 +0        109         632 ; main loop
                                 +0        110         633 ;-------------------------------------------------------
0000009F                         +0        111         634 main:
0000009F  C100003F00           R +0        112         635 	cpb (stopper),0 ;spin until vblank resets var
000000A4  66F9                   +0        113         636 	j z,main
                                 +0        114         637 
000000A6  C1856F3F00             +0        115         638 	cpb (User_Shutdown),0 ;turn off the system if we get a shutdown req
000000AB  6607                   +0        116         639 	j eq,main_100
                                 +0        117         640 
000000AD  C731A8                 +0        118         641 	ldb rw3,VECT_SHUTDOWN
000000B0  1D000000             R +0        119         642 	cal SYSTEM_CALL
                                 +0        120         643 
000000B4                         +0        121         644 main_100:
000000B4  D1000061             R +0        122         645 	incw 1,(frame_cnt)
000000B8  F100000000           R +0        123         646 	ldb (hint_cnt),0 ;reset number of times horizontal interrupt was called
000000BD  1D000000             R +0        124         647 	cal player_move
                                 +0        125         648 	
000000C1  F100000000           R +0        126         649 	ldb (stopper),0
000000C6  68D7                   +0        127         650 	j main
                                 +0        128         651 	
000000C8                         +0        129         652 String:
000000C8  68656C6C6F20776F726C   +0        130         653 	db "hello world",0
          6400                                             
000000D4                         +0        131         654 	align 2
000000D4                         +0        132         655 JoyStr:
000000D4  6A6F797061643A207878   +0        133         656 	db "joypad: xx",0
          00                                               
000000DF                         +0        134         657 	align 2
000000E0                         +0        135         658 FrameStr:
000000E0  6672616D653A20787878   +0        136         659 	db "frame: xxxx",0
          7800                                             
000000EC                         +0        137         660 	align 2
                                 +0        138         661 	
                                 +0        139         662 ;-------------------------------------------------------
                                 +0        140         663 ; v-blank interrupt
                                 +0        141         664 ;-------------------------------------------------------
000000EC                         +0        142         665 v_int:
000000EC  3C                     +0        143         666 	pushl xix
000000ED  3D                     +0        144         667 	pushl xiy
000000EE  3E                     +0        145         668 	pushl xiz
000000EF  38                     +0        146         669 	pushl xwa
000000F0  39                     +0        147         670 	pushl xbc
000000F1  3A                     +0        148         671 	pushl xde
000000F2  3B                     +0        149         672 	pushl xhl
000000F3  02                     +0        150         673 	pushw sr
                                 +0        151         674 ;	--------------------------------
000000F4  086F4E                 +0        152         675 	ldb	(WDCR),WD_CLR ;watch dog clear
000000F7  F1000000FF           R +0        153         676 	ldb	(stopper),0xff
000000FC  1D000000             R +0        154         677 	cal scroll_copy
                                 +0        155         678 	;set up joypad variables
00000100  C1000021             R +0        156         679 	ldb a,(joypad)
00000104  F1000041             R +0        157         680 	ldb (joylast),a
00000108  C1826F20               +0        158         681 	ldb w,(Sys_lever)
0000010C  F1000040             R +0        159         682 	ldb (joypad),w
00000110  C9CDFF                 +0        160         683 	xorb a,0xff ;flip the bits
00000113  C8C1                   +0        161         684 	andb a,w ;check if there's any overlap between what was pressed this frame
00000115  F1000041             R +0        162         685 	ldb (joyedge),a ;and what wasn't pressed last frame
                                 +0        163         686 	
                                 +0        164         687 	;keep scroll 2 from scrolling off screen
00000119  D1000020             R +0        165         688 	ldw wa,(scroll_y)
0000011D  D8EF01                 +0        166         689 	srlw 1,wa
00000120  C9CF66                 +0        167         690 	cpb a,102
00000123  6702                   +0        168         691 	j c,normal_scroll
00000125  2166                   +0        169         692 	ldb a,102
00000127                         +0        170         693 normal_scroll:	
00000127  F1358041               +0        171         694 	ldb (SCRL_Y2_ADR),a
                                 +0        172         695 	
                                 +0        173         696 	;set up bank 2 registers for horizontal interrupt
0000012B  D1000021             R +0        174         697 	ldw bc,(scroll_x)
0000012F  CB8C                   +0        175         698 	ldb d,c
00000131  D9EF01                 +0        176         699 	srlw 1,bc
00000134  C7249B                 +0        177         700 	ldb rc2,c ;x / 2
00000137  D9EF01                 +0        178         701 	srlw 1,bc
0000013A  C7259B                 +0        179         702 	ldb rb2,c ;x / 4
0000013D  D9EF01                 +0        180         703 	srlw 1,bc
00000140  C7209B                 +0        181         704 	ldb ra2,c ;x / 8
00000143  CB8D                   +0        182         705 	ldb e,c
                                 +0        183         706 	; the 3 "split points" are at 88, 128, and 168.
00000145  2000                   +0        184         707 	ldb w,0
                                 +0        185         708 	
00000147  335800                 +0        186         709 	ldw hl,88
0000014A  D8A3                   +0        187         710 	subw hl,wa
0000014C  DBDD                   +0        188         711 	cpw hl,5
0000014E  6502                   +0        189         712 	j mi,low_vals
00000150  6811                   +0        190         713 	j normal_vals
00000152                         +0        191         714 low_vals:
00000152  2780                   +0        192         715 	ldb l,128
00000154  C9A7                   +0        193         716 	subb l,a
00000156  F1348045               +0        194         717 	ldb (SCRL_X2_ADR),e
0000015A  C721A9                 +0        195         718 	ldb rw2,1
0000015D  C7280328               +0        196         719 	ldb re2,40
00000161  6813                   +0        197         720 	j done_vals
00000163                         +0        198         721 normal_vals:
00000163  C1000021             R +0        199         722 	ldb a,(frame_cnt)
00000167  F1348041               +0        200         723 	ldb (SCRL_X2_ADR),a
0000016B  C721A8                 +0        201         724 	ldb rw2,0
0000016E  C7290328               +0        202         725 	ldb rd2,40
00000172  C7280328               +0        203         726 	ldb re2,40
00000176                         +0        204         727 done_vals:
                                 +0        205         728 	
                                 +0        206         729 	;enable horizontal interrupt
00000176                         +0        207         730 set_int:
00000176  0607                   +0        208         731 	di
00000178  C0203CFE               +0        209         732 	andb (0x20),0xfe ;disable timer 0
0000017C  C0243CFC               +0        210         733 	andb (0x24),0xfc ;timer 0: external clock (hblank)
00000180  F02247                 +0        211         734 	ldb (0x22),l ;what line to trigger interrupt on
00000183  C731AC                 +0        212         735 	ldb rw3,VECT_INTLVSET ;enable interrupt through bios call
00000186  C735AB                 +0        213         736 	ldb rb3,3
00000189  C734AA                 +0        214         737 	ldb rc3,2
0000018C  F9                     +0        215         738 	swi 1 ;go to bios call
0000018D  C0203E01               +0        216         739 	orb (0x20),0x1 ;enable timer 0
00000191  0600                   +0        217         740 	ei 0
00000193  6808                   +0        218         741 	j done_int
00000195                         +0        219         742 no_int:
00000195  0607                   +0        220         743 	di
00000197  C0203CFE               +0        221         744 	andb (0x20),0xfe ;disable timer 0
0000019B  0600                   +0        222         745 	ei 0
                                 +0        223         746 	
0000019D                         +0        224         747 done_int:	
                                 +0        225         748 	
                                 +0        226         749 ;	--------------------------------
0000019D  03                     +0        227         750     popw sr
0000019E  5B                     +0        228         751 	popl xhl
0000019F  5A                     +0        229         752 	popl xde
000001A0  59                     +0        230         753 	popl xbc
000001A1  58                     +0        231         754 	popl xwa
000001A2  5E                     +0        232         755 	popl xiz
000001A3  5D                     +0        233         756 	popl xiy
000001A4  5C                     +0        234         757 	popl xix
                                 +0        235         758 
000001A5  07                     +0        236         759 	reti
                                 +0        237         760 
                                 +0        238         761 ;-------------------------------------------------------
                                 +0        239         762 ; other interrupts
                                 +0        240         763 ;-------------------------------------------------------
                                 +0        241         764 ; horizontal interrupt happens so quickly that we don't want to bother
                                 +0        242         765 ; touching ram, so instead we use register bank 2
                                 +0        243         766 ;
                                 +0        244         767 ; seams for hill bg are at 88, 128, and 168
                                 +0        245         768 ;-------------------------------------------------------
                                 +0        246         769 ; register map:
                                 +0        247         770 ; w: counts how many times horizontal interrupt has been called
                                 +0        248         771 ; a: x position for first zone (furthest back hill)
                                 +0        249         772 ; b: x position for second zone (middle hill)
                                 +0        250         773 ; c: x position for third zone (closest hill)
                                 +0        251         774 ; d: y position for second split
                                 +0        252         775 ; e: y position for third split
                                 +0        253         776 ;-------------------------------------------------------
000001A6                         +0        254         777 h_int:
000001A6  1702                   +0        255         778 	ldf 2 ;load register bank 2
000001A8  C1088026               +0        256         779 	ldb h,(WD_LCDST_HPOS)
000001AC  CECF98                 +0        257         780 	cpb h,152 ;don't mess with scroll if in vblank
000001AF  6F44                   +0        258         781 	j nc,done_h_int
000001B1  C8D8                   +0        259         782 	cpb w,0
000001B3  662B                   +0        260         783 	j eq,first
000001B5  C8D9                   +0        261         784 	cpb w,1
                                 +0        262         785 	; j c,first
000001B7  660F                   +0        263         786 	j eq,second
000001B9                         +0        264         787 third:
000001B9  F1348043               +0        265         788 	ldb (SCRL_X2_ADR),c
000001BD  0607                   +0        266         789 	di
000001BF  C0203CFE               +0        267         790 	andb (0x20),0xfe ;disable timer 0
000001C3  0600                   +0        268         791 	ei 0
000001C5  1700                   +0        269         792 	ldf 0
000001C7  07                     +0        270         793 	reti
000001C8                         +0        271         794 second:
000001C8  F1348042               +0        272         795 	ldb (SCRL_X2_ADR),b
000001CC  2002                   +0        273         796 	ldb w,2
000001CE  0607                   +0        274         797 	di
000001D0  C0203CFE               +0        275         798 	andb (0x20),0xfe ;disable timer 0
000001D4  F02245                 +0        276         799 	ldb (0x22),e ;scanline to fire next horizontal interrupt
000001D7  C0203E01               +0        277         800 	orb (0x20),0x1 ;enable timer 0
000001DB  0600                   +0        278         801 	ei 0
000001DD  1700                   +0        279         802 	ldf 0
000001DF  07                     +0        280         803 	reti
000001E0                         +0        281         804 first:
000001E0  F1348041               +0        282         805 	ldb (SCRL_X2_ADR),a
000001E4  2001                   +0        283         806 	ldb w,1
000001E6  0607                   +0        284         807 	di
000001E8  C0203CFE               +0        285         808 	andb (0x20),0xfe ;disable timer 0
000001EC  F02244                 +0        286         809 	ldb (0x22),d ;scanline to fire next horizontal interrupt
000001EF  C0203E01               +0        287         810 	orb (0x20),0x1 ;enable timer 0
000001F3  0600                   +0        288         811 	ei 0
000001F5                         +0        289         812 done_h_int:	
000001F5  1700                   +0        290         813 	ldf 0
000001F7  07                     +0        291         814 	reti
                                 +0        292         815 	
                                 +0        293         816 
000001F8                         +0        294         817 timer1:
000001F8  07                     +0        295         818 	reti
                                 +0        296         819 
000001F9                         +0        297         820 timer2:
000001F9  07                     +0        298         821 	reti
                                 +0        299         822 
000001FA                         +0        300         823 alarm_int:
000001FA  07                     +0        301         824 	reti
                                 +0        302         825 
000001FB                         +0        303         826 z80_int:
000001FB  07                     +0        304         827 	reti
                                 +0        305         828 
000001FC                         +0        306         829 sound_int:
000001FC  07                     +0        307         830 	reti
                                 +0        308         831 
000001FD                         +0        309         832 dummy:
000001FD  07                     +0        310         833 	reti
                                 +0        311         834 
                                 +0        312         835 ;-------------------------------------------------------
                                 +0        313         836 	end
                                 +0        314         837 ;-------------------------------------------------------

Assembly complete, No error
TLCS-900 Relocatable Assembler (32) V2.2k  [Page     2]  main.lst

Symbol table listing
--------------------

Symbol           Category         Value     Attribute

ALARM_BOOT_REQ           NUM      00000007  A           
BAT_SHUTDOWN_REQ
                         NUM      00000005  A           
BGCOL_CRAM               NUM      000083E0  A           
BG_COLOR                 NUM      00008118  A           
BIT_A                    NUM      00000004  A           
BIT_B                    NUM      00000005  A           
BIT_DOWN                 NUM      00000001  A           
BIT_LEFT                 NUM      00000002  A           
BIT_OPTION               NUM      00000006  A           
BIT_RIGHT                NUM      00000003  A           
BIT_UP                   NUM      00000000  A           
Battery_Voltage          NUM      00006F80  A           
CHR_VRAM                 NUM      0000A000  A           
DISP_CTL0                NUM      00008000  A           
FrameStr         C L     LAB      000000E0  R           PROG
INT_CLR_BIT              NUM      00000007  A           
JOY_A                    NUM      00000010  A           
JOY_B                    NUM      00000020  A           
JOY_DOWN                 NUM      00000002  A           
JOY_LEFT                 NUM      00000004  A           
JOY_OPTION               NUM      00000040  A           
JOY_RIGHT                NUM      00000008  A           
JOY_UP                   NUM      00000001  A           
JoyStr           C L     LAB      000000D4  R           PROG
LCD_CTR_ADD              NUM      00008012  A           
Language                 NUM      00006F87  A           
MP_SHUTDOWN_REQ          NUM      00000007  A           
OS_Version               NUM      00006F91  A           
PAL_SCR1_00              NUM      00008111  A           
PAL_SCR1_01              NUM      00008112  A           
PAL_SCR1_02              NUM      00008113  A           
PAL_SCR1_10              NUM      00008115  A           
PAL_SCR1_11              NUM      00008116  A           
PAL_SCR1_12              NUM      00008117  A           
PL_SCR0_00               NUM      00008109  A           
PL_SCR0_01               NUM      0000810A  A           
PL_SCR0_02               NUM      0000810B  A           
PL_SCR0_10               NUM      0000810D  A           
PL_SCR0_11               NUM      0000810E  A           
PL_SCR0_12               NUM      0000810F  A           
PL_SPR_00                NUM      00008101  A           
PL_SPR_01                NUM      00008102  A           
PL_SPR_02                NUM      00008103  A           
PL_SPR_10                NUM      00008105  A           
PL_SPR_11                NUM      00008106  A           
PL_SPR_12                NUM      00008107  A           
POWER_BOOT_REQ           NUM      00000006  A           
PROG             C L     SEC      00000000  R 1FE       
RESET_ADD                NUM      000087E0  A           
RESUME_ANS               NUM      00000007  A           
RESUME_BOOT_REQ          NUM      00000005  A           
SCRL1_VRAM               NUM      00009000  A           
SCRL2_VRAM               NUM      00009800  A           
SCRL_PRIO_ADR            NUM      00008030  A           
SCRL_X1_ADR              NUM      00008032  A           
SCRL_X2_ADR              NUM      00008034  A           
SCRL_Y1_ADR              NUM      00008033  A           
SCRL_Y2_ADR              NUM      00008035  A           
SCROLL1_CRAM             NUM      00008280  A           
SCROLL2_CRAM             NUM      00008300  A           
SPRITE_CRAM              NUM      00008200  A           
SPR_OFFSET_X_ADR
                         NUM      00008020  A           
SPR_OFFSET_Y_ADR
                         NUM      00008021  A           
SPR_PALCODE              NUM      00008C00  A           
SPR_VRAM                 NUM      00008800  A           
STS_RG_ADD               NUM      00008010  A           
SYSTEM_CALL                       00000000  R EXT       
SYS_FAILURE              NUM      000000FF  A           
SYS_PATCH                         00000000  R EXT       
SYS_SUCCESS              NUM      00000000  A           
String           C L     LAB      000000C8  R           PROG
Sys_lever                NUM      00006F82  A           
T8RUN                    NUM      00000020  A           
TIMER_SHUTDOWN_ANS
                         NUM      00000006  A           
TIME_SHUTDOWN_REQ
                         NUM      00000006  A           
User_Answer              NUM      00006F86  A           
User_Boot                NUM      00006F84  A           
User_Shutdown            NUM      00006F85  A           
VECT_ALARMDOWNSET
                         NUM      0000000B  A           
VECT_ALARMSET            NUM      00000009  A           
VECT_CLOCKGEARSET
                         NUM      00000001  A           
VECT_FLASHALLERS
                         NUM      00000007  A           
VECT_FLASHERS            NUM      00000008  A           
VECT_FLASHPROTECT
                         NUM      0000000D  A           
VECT_FLASHWRITE          NUM      00000006  A           
VECT_GEMODESET           NUM      0000000E  A           
VECT_INTLVSET            NUM      00000004  A           
VECT_RTCGET              NUM      00000002  A           
VECT_SHUTDOWN            NUM      00000000  A           
VECT_SYSFONTSET          NUM      00000005  A           
VERSION_ADD              NUM      000087FE  A           
WDCR                     NUM      0000006F  A           
WD_CLR                   NUM      0000004E  A           
WD_LCDST_HPOS            NUM      00008008  A           
WD_LCDST_VPOS            NUM      00008009  A           
WINDOW_CRAM              NUM      000083F0  A           
WIN_WBAX_ADR             NUM      00008002  A           
WIN_WBAY_ADR             NUM      00008003  A           
WIN_WSIX_ADR             NUM      00008004  A           
WIN_WSIY_ADR             NUM      00008005  A           
_ALARM_BOOT_REQ          NUM      00000080  A           
_BAT_SHUTDOWN_REQ
                         NUM      00000020  A           
_INT_CLR_BIT             NUM      00000080  A           
_MP_SHUTDOWN_REQ
                         NUM      00000080  A           
_POWER_BOOT_REQ          NUM      00000040  A           
_RESUME_ANS              NUM      00000080  A           
_RESUME_BOOT_REQ
                         NUM      00000020  A           
_TIMER_SHUTDOWN_ANS
                         NUM      00000040  A           
_TIME_SHUTDOWN_REQ
                         NUM      00000040  A           
__STARTUP                NUM      00FF1800  A PUB       
alarm_int        C L     LAB      000001FA  R PUB       PROG
copy_row         C L     LAB      00000073  R           PROG
disp_size_x              NUM      000000A0  A           
disp_size_y              NUM      00000098  A           
done_h_int       C L     LAB      000001F5  R           PROG
done_int         C L     LAB      0000019D  R           PROG
done_vals        C L     LAB      00000176  R           PROG
dummy            C L     LAB      000001FD  R PUB       PROG
first            C L     LAB      000001E0  R           PROG
frame_cnt                         00000000  R EXT       
game_main                MOD
h_int            C L     LAB      000001A6  R PUB       PROG
hills                             00000000  R EXT       
hills_end                         00000000  R EXT       
hills_map                         00000000  R EXT       
hills_pal                         00000000  R EXT       
hills_pal_end                     00000000  R EXT       
hint_cnt                          00000000  R EXT       
init_setting                      00000000  R EXT       
joyedge                           00000000  R EXT       
joylast                           00000000  R EXT       
joypad                            00000000  R EXT       
low_vals         C L     LAB      00000152  R           PROG
main             C L     LAB      0000009F  R           PROG
main_100         C L     LAB      000000B4  R           PROG
map                               00000000  R EXT       
map2_loop        C L     LAB      0000008E  R           PROG
map_copy         C L     LAB      00000070  R           PROG
no_int           C L     LAB      00000195  R           PROG
normal_scroll    C L     LAB      00000127  R           PROG
normal_vals      C L     LAB      00000163  R           PROG
obj_max                  NUM      00000040  A           
palette                           00000000  R EXT       
palette_copy     C L     LAB      00000018  R           PROG
palette_copy2    C L     LAB      0000002F  R           PROG
palette_end                       00000000  R EXT       
player_init                       00000000  R EXT       
player_move                       00000000  R EXT       
reset            C L     LAB      00000000  R PUB       PROG
scroll_copy                       00000000  R EXT       
scroll_x                          00000000  R EXT       
scroll_y                          00000000  R EXT       
second           C L     LAB      000001C8  R           PROG
set_int          C L     LAB      00000176  R           PROG
sound_int        C L     LAB      000001FC  R PUB       PROG
stopper                           00000000  R EXT       
third            C L     LAB      000001B9  R           PROG
tiles                             00000000  R EXT       
tiles_end                         00000000  R EXT       
timer1           C L     LAB      000001F8  R PUB       PROG
timer2           C L     LAB      000001F9  R PUB       PROG
v_int            C L     LAB      000000EC  R PUB       PROG
z80_int          C L     LAB      000001FB  R PUB       PROG


TOTAL
  163 user defined symbol(s)
   17 unreferenced external symbol(s)
