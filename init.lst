(C)Copyright TOSHIBA CORPORATION 1993-2009  All rights reserved
Wed Jun 03 22:50:58 2020
TLCS-900 Relocatable Assembler (32) V2.2k  [Page     1]  init.lst
Runtime option : c:\Program Files (x86)\TOSHIBA\T900\bin\asm900.exe -Nb2 -O1 -g -l init.asm

Location  Object                           Ins        Line Source Statement

                                 +0          1           1 ;*****************************************
                                 +0          2           2 ;	SAMPLE PROGRAM (INITIALIZATION)
                                 +0          3           3 ;*****************************************
                                 +0          4           4 $MAXIMUM						;
                                 +0          5           5 	module  init					;
                                 +0          6           6 
                                 +0          7           7 ;  ---------------------------------
                                 +0          8           8 ;	EXTERNAL LOOKUP
                                 +0          9           9 ;  ---------------------------------
                                 +0         10          10 	extern	RAM_Vector
                                 +0         11          11 
                                 +0         12          12 ;  ---------------------------------
                                 +0         13          13 ;   EXTERNAL DEFIINITION
                                 +0         14          14 ;  ---------------------------------
                                 +0         15          15 	public  init_setting     			;
                                 +0         16          16 
                                 +0         17          17 ;  ---------------------------------
                                 +0         18          18 ;	INCLUDE
                                 +0         19          19 ;  ---------------------------------
                                 +0         20          20 	$include	"system.inc"
                                 +1          1          21 ;-----------------------------------------------------------------
                                 +1          2          22 
                                 +1          3          23 ;	SYSTEM CALL
                                 +1          4          24 
                                 +1          5          25 ;-----------------------------------------------------------------
                                 +1          6          26 
  00000000                       +1          7          27 SYS_SUCCESS		equ	0x00			;run success
                                 +1          8          28 
  000000FF                       +1          9          29 SYS_FAILURE		equ	0xff			;run failure
                                 +1         10          30 
                                 +1         11          31 ;-----------------------------------------------------------------
                                 +1         12          32 
  00000000                       +1         13          33 VECT_SHUTDOWN		equ	0x00			;shutdown (power OFF)
                                 +1         14          34 
  00000001                       +1         15          35 VECT_CLOCKGEARSET	equ	0x01			;clock gear change
                                 +1         16          36 
  00000002                       +1         17          37 VECT_RTCGET		equ	0x02			;obtain time
                                 +1         18          38 
  00000004                       +1         19          39 VECT_INTLVSET		equ	0x04			;set interrupt level
                                 +1         20          40 
  00000005                       +1         21          41 VECT_SYSFONTSET	equ	0x05			;set system font
                                 +1         22          42 
  00000006                       +1         23          43 VECT_FLASHWRITE	equ	0x06			;flash memory data write
                                 +1         24          44 
  00000007                       +1         25          45 VECT_FLASHALLERS	equ	0x07			;flash memory erase all blocks
                                 +1         26          46 
  00000008                       +1         27          47 VECT_FLASHERS		equ	0x08			;flash memory erase specified blocks
                                 +1         28          48 
  00000009                       +1         29          49 VECT_ALARMSET		equ	0x09			;game alarm setting
                                 +1         30          50 
  0000000B                       +1         31          51 VECT_ALARMDOWNSET	equ	0x0b			;alarm setting during shutdown
                                 +1         32          52 
  0000000D                       +1         33          53 VECT_FLASHPROTECT	equ	0x0d			;protect using tool
                                 +1         34          54 
  0000000E                       +1         35          55 VECT_GEMODESET	equ	0x0e			;switching GE mode
                                 +1         36          56 
                                 +1         37          57 ;-----------------------------------------------------------------
                                 +1         38          58 
                                 +1         39          59 ;	SYSTEM BIT EQU
                                 +1         40          60 
                                 +1         41          61 ;-----------------------------------------------------------------
                                 +1         42          62 
  00000007                       +1         43          63 INT_CLR_BIT		equ	0x07			;interrupt request clear bit
                                 +1         44          64 
  00000080                       +1         45          65 _INT_CLR_BIT		equ	0y10000000		;
                                 +1         46          66 
                                 +1         47          67 ;-----------------------------------------------------------------
                                 +1         48          68 
                                 +1         49          69 ;	SYSTEM WORK
                                 +1         50          70 
                                 +1         51          71 ;-----------------------------------------------------------------
                                 +1         52          72 
  00006F80                       +1         53          73 Battery_Voltage	equ	0x6f80			;estimated voltage
                                 +1         54          74 
  00006F82                       +1         55          75 Sys_lever		equ	0x6f82			;lever value
                                 +1         56          76 
  00006F87                       +1         57          77 Language		equ	0x6f87			;language chosen
                                 +1         58          78 
  00006F85                       +1         59          79 User_Shutdown		equ	0x6f85			;shutdown re1uest bit
                                 +1         60          80 
  00006F84                       +1         61          81 User_Boot		equ	0x6f84			;startup bit flag
                                 +1         62          82 
  00006F86                       +1         63          83 User_Answer		equ	0x6f86			;user request bit
                                 +1         64          84 
  00006F91                       +1         65          85 OS_Version		equ	0x6f91			;system version reserve work
                                 +1         66          86 
                                 +1         67          87 ;-----------------------------------------------------------------
                                 +1         68          88 
                                 +1         69          89 ;	WATCH DOG
                                 +1         70          90 
                                 +1         71          91 ;-----------------------------------------------------------------
                                 +1         72          92 
  0000006F                       +1         73          93 WDCR			equ	0x06F		;watch dog control address
                                 +1         74          94 
  0000004E                       +1         75          95 WD_CLR			equ	0x04e		;watch dog clear code
                                 +1         76          96 
                                 +1         77          97 ;-----------------------------------------------------------------
                                 +1         78          98 
                                 +1         79          99 ;	SYSTEM WORK BIT
                                 +1         80         100 
                                 +1         81         101 ;-----------------------------------------------------------------
                                 +1         82         102 
  00000001                       +1         83         103 JOY_UP 		equ 0x1
  00000002                       +1         84         104 JOY_DOWN 	equ 0x2
  00000004                       +1         85         105 JOY_LEFT 	equ 0x4
  00000008                       +1         86         106 JOY_RIGHT 	equ 0x8
  00000010                       +1         87         107 JOY_A		equ 0x10
  00000020                       +1         88         108 JOY_B		equ 0x20
  00000040                       +1         89         109 JOY_OPTION	equ 0x40
                                 +1         90         110 
  00000000                       +1         91         111 BIT_UP		equ 0
  00000001                       +1         92         112 BIT_DOWN	equ 1
  00000002                       +1         93         113 BIT_LEFT	equ 2
  00000003                       +1         94         114 BIT_RIGHT	equ 3
  00000004                       +1         95         115 BIT_A		equ 4
  00000005                       +1         96         116 BIT_B		equ 5
  00000006                       +1         97         117 BIT_OPTION	equ 6
                                 +1         98         118 
                                 +1         99         119 ;======================================================= 
                                 +1        100         120 
                                 +1        101         121 ;	USER START UP BIT
                                 +1        102         122 
                                 +1        103         123 ;======================================================= 
                                 +1        104         124 
                                 +1        105         125 ;User_Boot
                                 +1        106         126 
                                 +1        107         127 ;	00000000
                                 +1        108         128 
                                 +1        109         129 ;	||+------ resume startup			0:not resume startup		1:resume startup
                                 +1        110         130 
                                 +1        111         131 ;	|+------- POWER startup			0:not POWER startup		1:POWER startup
                                 +1        112         132 
                                 +1        113         133 ;	+-------- alarm startup			0:not alarm statup		1:alarm statup
                                 +1        114         134 
                                 +1        115         135 ;	=================================================
                                 +1        116         136 
                                 +1        117         137 
                                 +1        118         138 
  00000007                       +1        119         139 ALARM_BOOT_REQ		equ	0x07
                                 +1        120         140 
  00000006                       +1        121         141 POWER_BOOT_REQ		equ	0x06
                                 +1        122         142 
  00000005                       +1        123         143 RESUME_BOOT_REQ		equ	0x05
                                 +1        124         144 
  00000080                       +1        125         145 _ALARM_BOOT_REQ		equ	0y10000000
                                 +1        126         146 
  00000040                       +1        127         147 _POWER_BOOT_REQ		equ	0y01000000
                                 +1        128         148 
  00000020                       +1        129         149 _RESUME_BOOT_REQ	equ	0y00100000
                                 +1        130         150 
                                 +1        131         151 
                                 +1        132         152 
                                 +1        133         153 ;======================================================= 
                                 +1        134         154 
                                 +1        135         155 ;	USER SHUTDOWN BIT
                                 +1        136         156 
                                 +1        137         157 ;======================================================= 
                                 +1        138         158 
                                 +1        139         159 ;User_Shutdown
                                 +1        140         160 
                                 +1        141         161 ;	00000000
                                 +1        142         162 
                                 +1        143         163 ;	||+--------- main power use shutdown request	0:no request	1:request
                                 +1        144         164 
                                 +1        145         165 ;	|+---------- no use shutdown request		0:no request	1:request
                                 +1        146         166 
                                 +1        147         167 ;	+----------- power off shutdown request		0:no request	1:request
                                 +1        148         168 
                                 +1        149         169 ;	=================================================
                                 +1        150         170 
                                 +1        151         171 
                                 +1        152         172 
  00000007                       +1        153         173 MP_SHUTDOWN_REQ	equ	0x07
                                 +1        154         174 
  00000006                       +1        155         175 TIME_SHUTDOWN_REQ	equ	0x06
                                 +1        156         176 
  00000005                       +1        157         177 BAT_SHUTDOWN_REQ	equ	0x05
                                 +1        158         178 
  00000080                       +1        159         179 _MP_SHUTDOWN_REQ	equ	0y10000000
                                 +1        160         180 
  00000040                       +1        161         181 _TIME_SHUTDOWN_REQ	equ	0y01000000
                                 +1        162         182 
  00000020                       +1        163         183 _BAT_SHUTDOWN_REQ	equ	0y00100000
                                 +1        164         184 
                                 +1        165         185 
                                 +1        166         186 
                                 +1        167         187 ;======================================================= 
                                 +1        168         188 
                                 +1        169         189 ;	USER ANSWER BIT
                                 +1        170         190 
                                 +1        171         191 ;======================================================= 
                                 +1        172         192 
                                 +1        173         193 ;User_Answer
                                 +1        174         194 
                                 +1        175         195 ;	00000000
                                 +1        176         196 
                                 +1        177         197 ;	|+----------- no use shutdown operation	0:non-existent	1:exists
                                 +1        178         198 
                                 +1        179         199 ;	+------------ resume operation		0:non-existent	1:exists
                                 +1        180         200 
                                 +1        181         201 ;	=================================================
                                 +1        182         202 
                                 +1        183         203 
                                 +1        184         204 
  00000007                       +1        185         205 RESUME_ANS		equ	0x07
                                 +1        186         206 
  00000006                       +1        187         207 TIMER_SHUTDOWN_ANS	equ	0x06
                                 +1        188         208 
  00000080                       +1        189         209 _RESUME_ANS		equ	0y10000000
                                 +1        190         210 
  00000040                       +1        191         211 _TIMER_SHUTDOWN_ANS	equ	0y01000000
                                 +1        192         212 
                                 +0         21         213 	$include	"k1head.inc"
                                 +1          1         214 ;=======================================================
                                 +1          2         215 
                                 +1          3         216 ;		SYSTEM RELATED EQU
                                 +1          4         217 
                                 +1          5         218 ;=======================================================
                                 +1          6         219 
  00008000                       +1          7         220 DISP_CTL0		EQU	0x08000			;interrupt control register
                                 +1          8         221 
                                 +1          9         222 ;D7 : 1 = Vint allowed / 0 = not allowed
                                 +1         10         223 
                                 +1         11         224 ;D6 : 1 = Hint allowed / 0 = not allowed
                                 +1         12         225 
                                 +1         13         226 
                                 +1         14         227 
  00008010                       +1         15         228 STS_RG_ADD		EQU	0x08010			;2D status register (READ)
                                 +1         16         229 
                                 +1         17         230 ;D7 : 1 = character over / 0 = no character over
                                 +1         18         231 
                                 +1         19         232 ;D6 : 1 = while V blanking / 0 = while in display mode
                                 +1         20         233 
                                 +1         21         234 
                                 +1         22         235 
  00008012                       +1         23         236 LCD_CTR_ADD		EQU	0x08012			;2D control register
                                 +1         24         237 
                                 +1         25         238 ;D7 : 1 = screen color inverse display / 0 = normal display
                                 +1         26         239 
                                 +1         27         240 ;D2Å`D0 : outside window frame color CODE
                                 +1         28         241 
                                 +1         29         242 
                                 +1         30         243 
  00008118                       +1         31         244 BG_COLOR		EQU 0x08118			;Background color register
                                 +1         32         245 
                                 +1         33         246 ;D7`D6: BGON. D7 = 1, D6 = 0: Use specified BG color. Defaults to D7/D6 both 0
                                 +1         34         247 
                                 +1         35         248 ;D2`D0: BG color code
                                 +1         36         249 
                                 +1         37         250 
                                 +1         38         251 
                                 +1         39         252 
  000087E0                       +1         40         253 RESET_ADD		EQU	0X087E0			;2D software reset (WRITE)
                                 +1         41         254 
                                 +1         42         255 ;2D cicuit initialization with "52" write
                                 +1         43         256 
                                 +1         44         257 
                                 +1         45         258 
  000087FE                       +1         46         259 VERSION_ADD		EQU	0x087FE			;2D cicuit version (READ)
                                 +1         47         260 
                                 +1         48         261 ;D7 : 1 = white LCD panel /0 = balck LCD panel 
                                 +1         49         262 
                                 +1         50         263 ;D5Å`D0 : 2D circuit version
                                 +1         51         264 
                                 +1         52         265 
                                 +1         53         266 
                                 +1         54         267 
                                 +1         55         268 
                                 +1         56         269 ;=======================================================
                                 +1         57         270 
                                 +1         58         271 ;		CHARACTER EQU
                                 +1         59         272 
                                 +1         60         273 ;=======================================================
                                 +1         61         274 
  0000A000                       +1         62         275 CHR_VRAM		EQU	0x0A000			;character data RAM address
                                 +1         63         276 
                                 +1         64         277 
                                 +1         65         278 
                                 +1         66         279 
                                 +1         67         280 
                                 +1         68         281 ;=======================================================
                                 +1         69         282 
                                 +1         70         283 ;		SCROLL EQU
                                 +1         71         284 
                                 +1         72         285 ;=======================================================
                                 +1         73         286 
  00009000                       +1         74         287 SCRL1_VRAM		EQU	0x09000
                                 +1         75         288 
  00009800                       +1         76         289 SCRL2_VRAM		EQU	0x09800
                                 +1         77         290 
                                 +1         78         291 
                                 +1         79         292 
  00008030                       +1         80         293 SCRL_PRIO_ADR		EQU	0X08030			;scroll priority level invert register 
                                 +1         81         294 
  00008032                       +1         82         295 SCRL_X1_ADR		EQU	0x08032			;scroll 1 offset H register
                                 +1         83         296 
  00008033                       +1         84         297 SCRL_Y1_ADR		EQU	0x08033			;scroll 1 offset V register
                                 +1         85         298 
  00008034                       +1         86         299 SCRL_X2_ADR		EQU	0x08034			;scroll 2 offset H register
                                 +1         87         300 
  00008035                       +1         88         301 SCRL_Y2_ADR		EQU	0x08035			;scroll 2 offset V register
                                 +1         89         302 
                                 +1         90         303 
                                 +1         91         304 
                                 +1         92         305 ;=======================================================
                                 +1         93         306 
                                 +1         94         307 ;		SPRITE EQU
                                 +1         95         308 
                                 +1         96         309 ;=======================================================
                                 +1         97         310 
  00008800                       +1         98         311 SPR_VRAM		EQU	0x08800
                                 +1         99         312 
  00008020                       +1        100         313 SPR_OFFSET_X_ADR	EQU	0x08020			;sprite offset H
                                 +1        101         314 
  00008021                       +1        102         315 SPR_OFFSET_Y_ADR	EQU	0x08021			;sprite offset V
                                 +1        103         316 
  00008C00                       +1        104         317 SPR_PALCODE EQU 0x8C00 ;what palette # to use for each sprite 
                                 +1        105         318 
                                 +1        106         319 
                                 +1        107         320 
                                 +1        108         321 
                                 +1        109         322 ;=======================================================
                                 +1        110         323 
                                 +1        111         324 ;		WINDOW SYSTEM EQU
                                 +1        112         325 
                                 +1        113         326 ;=======================================================
                                 +1        114         327 
  00008002                       +1        115         328 WIN_WBAX_ADR		EQU	0x08002			;window origin H
                                 +1        116         329 
  00008003                       +1        117         330 WIN_WBAY_ADR		EQU	0x08003			;window origin V
                                 +1        118         331 
  00008004                       +1        119         332 WIN_WSIX_ADR		EQU	0x08004			;window size H
                                 +1        120         333 
  00008005                       +1        121         334 WIN_WSIY_ADR		EQU	0x08005			;window size V
                                 +1        122         335 
                                 +1        123         336 
                                 +1        124         337 
  00008008                       +1        125         338 WD_LCDST_HPOS		EQU	0x08008			;raster H position register (READ)
                                 +1        126         339 
  00008009                       +1        127         340 WD_LCDST_VPOS		EQU	0x08009			;raster V position register (READ)
                                 +1        128         341 
                                 +1        129         342 
                                 +1        130         343 
                                 +1        131         344 ;=======================================================
                                 +1        132         345 
                                 +1        133         346 ;		PALETTE EQU
                                 +1        134         347 
                                 +1        135         348 ;=======================================================
                                 +1        136         349 
                                 +1        137         350 ;sprite palette 0
                                 +1        138         351 
  00008101                       +1        139         352 PL_SPR_00		EQU	0x08101	
                                 +1        140         353 
  00008102                       +1        141         354 PL_SPR_01		EQU	0x08102
                                 +1        142         355 
  00008103                       +1        143         356 PL_SPR_02		EQU	0x08103
                                 +1        144         357 
                                 +1        145         358 ;sprite palette 1
                                 +1        146         359 
  00008105                       +1        147         360 PL_SPR_10		EQU	0x08105
                                 +1        148         361 
  00008106                       +1        149         362 PL_SPR_11		EQU	0x08106
                                 +1        150         363 
  00008107                       +1        151         364 PL_SPR_12		EQU	0x08107
                                 +1        152         365 
                                 +1        153         366 
                                 +1        154         367 
                                 +1        155         368 ;scroll 0 palette 0
                                 +1        156         369 
  00008109                       +1        157         370 PL_SCR0_00		EQU	0x08109
                                 +1        158         371 
  0000810A                       +1        159         372 PL_SCR0_01		EQU	0x0810A
                                 +1        160         373 
  0000810B                       +1        161         374 PL_SCR0_02		EQU	0x0810B
                                 +1        162         375 
                                 +1        163         376 ;scroll 0 palette 1
                                 +1        164         377 
  0000810D                       +1        165         378 PL_SCR0_10		EQU	0x0810D
                                 +1        166         379 
  0000810E                       +1        167         380 PL_SCR0_11		EQU	0x0810E
                                 +1        168         381 
  0000810F                       +1        169         382 PL_SCR0_12		EQU	0x0810F
                                 +1        170         383 
                                 +1        171         384 ;scroll 1 palette 0
                                 +1        172         385 
  00008111                       +1        173         386 PAL_SCR1_00		EQU	0x08111
                                 +1        174         387 
  00008112                       +1        175         388 PAL_SCR1_01		EQU	0x08112
                                 +1        176         389 
  00008113                       +1        177         390 PAL_SCR1_02		EQU	0x08113
                                 +1        178         391 
                                 +1        179         392 ;scroll 1 palette 1
                                 +1        180         393 
  00008115                       +1        181         394 PAL_SCR1_10		EQU	0x08115
                                 +1        182         395 
  00008116                       +1        183         396 PAL_SCR1_11		EQU	0x08116
                                 +1        184         397 
  00008117                       +1        185         398 PAL_SCR1_12		EQU	0x08117
                                 +1        186         399 
                                 +1        187         400 
                                 +1        188         401 ;=======================================================
                                 +1        189         402 
                                 +1        190         403 ;		COLOR PALETTE RAM EQU
                                 +1        191         404 
                                 +1        192         405 ;=======================================================
                                 +1        193         406 
  00008200                       +1        194         407 SPRITE_CRAM		EQU 0x08200
                                 +1        195         408 
  00008280                       +1        196         409 SCROLL1_CRAM	EQU 0x08280
                                 +1        197         410 
  00008300                       +1        198         411 SCROLL2_CRAM	EQU 0x08300
                                 +1        199         412 
  000083E0                       +1        200         413 BGCOL_CRAM		EQU 0x083E0 ;for the background color
                                 +1        201         414 
  000083F0                       +1        202         415 WINDOW_CRAM		EQU 0x083F0
                                 +1        203         416 
                                 +1        204         417 
                                 +1        205         418 ;=======================================================
                                 +1        206         419 
                                 +1        207         420 
                                 +1        208         421 
                                 +0         22         422 	$include	"glbwork.inc"
                                 +1          1         423 ;================================================================
                                 +1          2         424 ; global vars
                                 +1          3         425 ;================================================================
                                 +1          4         426 
                                 +1          5         427 	extern medium start_work
                                 +1          6         428 	extern medium stopper ; keeps main loop spinning until vblank (byte)
                                 +1          7         429 	extern medium joypad ;joypad bitmask (byte)
                                 +1          8         430 	extern medium joylast ;last frame's joypad bitmask (byte)
                                 +1          9         431 	extern medium joyedge ;what buttons were pressed this frame (byte)	
                                 +1         10         432 	extern medium frame_cnt ; counts number of frames (word)
                                 +1         11         433 	
                                 +1         12         434 	extern medium player_x ;player x pos (long)
                                 +1         13         435 	extern medium player_y ;player y pos (long)
                                 +1         14         436 	extern medium player_dx ;long
                                 +1         15         437 	extern medium player_dy ;long
                                 +1         16         438 ;================================================================
                                 +1         17         439 
                                 +0         23         440 	$include	"game.inc"
                                 +1          1         441 ;================================================================
                                 +1          2         442 ; GAME EQU
                                 +1          3         443 ;================================================================
                                 +1          4         444 
  000000A0                       +1          5         445 disp_size_x		EQU	160		; X screen size
                                 +1          6         446 
  00000098                       +1          7         447 disp_size_y		EQU	152		; Y screen size
                                 +1          8         448 
  00000040                       +1          9         449 obj_max		EQU	64		; number of maximum sprites
                                 +1         10         450 
                                 +1         11         451 ;================================================================
                                 +1         12         452 
                                 +0         24         453 	
                                 +0         25         454 ;-------------------------------------------------------
                                 +0         26         455 PROG	section code large				;
                                 +0         27         456 ;-------------------------------------------------------
                                 +0         28         457 ;-------------------------------------------------------
                                 +0         29         458 ;		INITIALIZATION
                                 +0         30         459 ;-------------------------------------------------------
00000000                         +0         31         460 init_setting:
                                 +0         32         461 ;  ---- SHUTDOWN ON DUE TO NO USE ---- 
00000000  F1866FBE               +0         33         462 	setb	TIMER_SHUTDOWN_ANS,(User_Answer)
                                 +0         34         463 
                                 +0         35         464 ;  ---- VECTOR DEFINITION ----
00000004  F200000034           R +0         36         465 	lda	xix,RAM_Vector
00000009  F1B86F35               +0         37         466 	lda	xiy,0x06fb8				;vector start address
0000000D  2212                   +0         38         467 	ldb	b,18
0000000F                         +0         39         468 vect_copy:
0000000F  E5F220                 +0         40         469 	ldl	xwa,(xix+)
00000012  F5F660                 +0         41         470 	ldl	(xiy+),xwa
00000015  CA1CF7                 +0         42         471 	djnz	b,vect_copy
                                 +0         43         472 
                                 +0         44         473 ;  ---- INITIALIZATION OF VRAM ----
00000018  1E4B00                 +0         45         474 	calr	sprite_clr
0000001B  1E5C00                 +0         46         475 	calr	scroll_clr
                                 +0         47         476 	; calr	plaet_seting
                                 +0         48         477 
0000001E  E8A8                   +0         49         478 	ldl	xwa,0
                                 +0         50         479 
                                 +0         51         480 ;  ---- I/O INITIALIZATION ----
                                 +0         52         481 ;sprites
00000020  F1208041               +0         53         482 	ldb	(SPR_OFFSET_X_ADR),a			;
00000024  F1218041               +0         54         483 	ldb	(SPR_OFFSET_Y_ADR),a			;
                                 +0         55         484 ;scroll plane
00000028  F1328041               +0         56         485 	ldb	(SCRL_X1_ADR),a			;
0000002C  F1338041               +0         57         486 	ldb	(SCRL_Y1_ADR),a			;
00000030  F1348041               +0         58         487 	ldb	(SCRL_X2_ADR),a			;
00000034  F1358041               +0         59         488 	ldb	(SCRL_Y2_ADR),a			;
00000038  F1308041               +0         60         489 	ldb	(SCRL_PRIO_ADR),a			;
                                 +0         61         490 ;window
0000003C  F1028041               +0         62         491 	ldb	(WIN_WBAX_ADR),a			;
00000040  F1038041               +0         63         492 	ldb	(WIN_WBAY_ADR),a			;
00000044  F1048000A0             +0         64         493 	ldb	(WIN_WSIX_ADR),disp_size_x		;screen horizontal size
00000049  F105800098             +0         65         494 	ldb	(WIN_WSIY_ADR),disp_size_y		;screen vertical size
                                 +0         66         495 
                                 +0         67         496 ;  ---- WORK INITIALIZATION ----
0000004E  310002                 +0         68         497 	ldw     bc,0x2000/4/4			;all work area
00000051  4400000000           R +0         69         498 	ldl	xix,start_work			;
                                 +0         70         499 	
00000056                         +0         71         500 work_init_loop:
00000056  F5F260                 +0         72         501 	ldl	(xix+),xwa				;
00000059  F5F260                 +0         73         502 	ldl	(xix+),xwa				;
0000005C  F5F260                 +0         74         503 	ldl	(xix+),xwa				;
0000005F  F5F260                 +0         75         504 	ldl	(xix+),xwa				;
00000062  D91CF1                 +0         76         505 	djnz    bc,work_init_loop			;
                                 +0         77         506 
00000065  0E                     +0         78         507 	ret
                                 +0         79         508 ;-------------------------------------------------------
                                 +0         80         509 
                                 +0         81         510 ;-------------------------------------------------------
                                 +0         82         511 ;		SPRITE RAM CLEAR
                                 +0         83         512 ;-------------------------------------------------------
00000066                         +0         84         513 sprite_clr:
00000066  D8A8                   +0         85         514 	ldw	wa,0
00000068  314000                 +0         86         515 	ldw     bc,obj_max				;display VRAM and display work clear
0000006B  4400880000             +0         87         516 	ldl	xix,SPR_VRAM
                                 +0         88         517 
00000070                         +0         89         518 sprite_loop:
00000070  F5F150                 +0         90         519 	ldw	(xix+),wa
00000073  F5F150                 +0         91         520 	ldw	(xix+),wa
00000076  D91CF7                 +0         92         521 	djnz    bc,sprite_loop
                                 +0         93         522 
00000079  0E                     +0         94         523 	ret
                                 +0         95         524 ;-------------------------------------------------------
                                 +0         96         525 ;-------------------------------------------------------
                                 +0         97         526 ; 		SCROLL RAM CLEAR
                                 +0         98         527 ;-------------------------------------------------------
0000007A                         +0         99         528 scroll_clr:
0000007A  310004                 +0        100         529 	ldw     bc,1024				;display RAM and display work clear
0000007D  4400900000             +0        101         530 	ldl	xix,SCRL1_VRAM
                                 +0        102         531 
00000082                         +0        103         532 scroll_loop:
00000082  F5F1020000             +0        104         533 	ldw	(xix+),0x0000
00000087  F5F1020000             +0        105         534 	ldw	(xix+),0x0000
0000008C  D91CF3                 +0        106         535 	djnz    bc,scroll_loop
                                 +0        107         536 
0000008F  0E                     +0        108         537 	ret
                                 +0        109         538 ;-------------------------------------------------------
                                 +0        110         539 ;-------------------------------------------------------
                                 +0        111         540 ;		PALETTE DEIFINITION	
                                 +0        112         541 ;-------------------------------------------------------
00000090                         +0        113         542 plaet_seting:
00000090  F1018134               +0        114         543 	ldal	xix,PL_SPR_00
00000094  F200000035           R +0        115         544 	ldal	xiy,pal_data
00000099  310306                 +0        116         545 	ldw	bc,0x0603				;sprite palette 2 + scroll palette 4
                                 +0        117         546 
0000009C                         +0        118         547 palet_loop:
0000009C  C5F421                 +0        119         548 	ldb	a,(xiy+)
0000009F  F5F041                 +0        120         549 	ldb	(xix+),a
000000A2  CB1CF7                 +0        121         550 	djnz    c,palet_loop
                                 +0        122         551 
000000A5  2303                   +0        123         552 	ldb     c,3
000000A7  EC61                   +0        124         553 	incl	1,xix
000000A9  CA1CF0                 +0        125         554 	djnz    b,palet_loop
000000AC  0E                     +0        126         555 	ret
                                 +0        127         556 ;-------------------------------------------------------
                                 +0        128         557 ;=======================================================
                                 +0        129         558 ;		PALETTE DATA
                                 +0        130         559 ;=======================================================
000000AD                         +0        131         560 pal_data:
000000AD  000007                 +0        132         561 	db	0x00,0x00,0x07				;sprite palette 0
000000B0  000007                 +0        133         562 	db	0x00,0x00,0x07				;sprite palette 1
                                 +0        134         563 
000000B3  010203                 +0        135         564 	db	0x01,0x02,0x03				;scroll 0 palette 0
000000B6  010203                 +0        136         565 	db	0x01,0x02,0x03				;scroll 0 palette 1
000000B9  010203                 +0        137         566 	db	0x01,0x02,0x03				;scroll 1 palette 0
000000BC  010203                 +0        138         567 	db	0x01,0x02,0x03				;scroll 1 palette 1
000000BF                         +0        139         568 	align   2	
                                 +0        140         569 ;=======================================================
                                 +0        141         570 ;-------------------------------------------------------
                                 +0        142         571 	end
                                 +0        143         572 ;-------------------------------------------------------

Assembly complete, No error
TLCS-900 Relocatable Assembler (32) V2.2k  [Page     2]  init.lst

Symbol table listing
--------------------

Symbol           Category         Value     Attribute

ALARM_BOOT_REQ           NUM      00000007  A           
BAT_SHUTDOWN_REQ
                         NUM      00000005  A           
BGCOL_CRAM               NUM      000083E0  A           
BG_COLOR                 NUM      00008118  A           
BIT_A                    NUM      00000004  A           
BIT_B                    NUM      00000005  A           
BIT_DOWN                 NUM      00000001  A           
BIT_LEFT                 NUM      00000002  A           
BIT_OPTION               NUM      00000006  A           
BIT_RIGHT                NUM      00000003  A           
BIT_UP                   NUM      00000000  A           
Battery_Voltage          NUM      00006F80  A           
CHR_VRAM                 NUM      0000A000  A           
DISP_CTL0                NUM      00008000  A           
INT_CLR_BIT              NUM      00000007  A           
JOY_A                    NUM      00000010  A           
JOY_B                    NUM      00000020  A           
JOY_DOWN                 NUM      00000002  A           
JOY_LEFT                 NUM      00000004  A           
JOY_OPTION               NUM      00000040  A           
JOY_RIGHT                NUM      00000008  A           
JOY_UP                   NUM      00000001  A           
LCD_CTR_ADD              NUM      00008012  A           
Language                 NUM      00006F87  A           
MP_SHUTDOWN_REQ          NUM      00000007  A           
OS_Version               NUM      00006F91  A           
PAL_SCR1_00              NUM      00008111  A           
PAL_SCR1_01              NUM      00008112  A           
PAL_SCR1_02              NUM      00008113  A           
PAL_SCR1_10              NUM      00008115  A           
PAL_SCR1_11              NUM      00008116  A           
PAL_SCR1_12              NUM      00008117  A           
PL_SCR0_00               NUM      00008109  A           
PL_SCR0_01               NUM      0000810A  A           
PL_SCR0_02               NUM      0000810B  A           
PL_SCR0_10               NUM      0000810D  A           
PL_SCR0_11               NUM      0000810E  A           
PL_SCR0_12               NUM      0000810F  A           
PL_SPR_00                NUM      00008101  A           
PL_SPR_01                NUM      00008102  A           
PL_SPR_02                NUM      00008103  A           
PL_SPR_10                NUM      00008105  A           
PL_SPR_11                NUM      00008106  A           
PL_SPR_12                NUM      00008107  A           
POWER_BOOT_REQ           NUM      00000006  A           
PROG             C L     SEC      00000000  R C0        
RAM_Vector                        00000000  R EXT       
RESET_ADD                NUM      000087E0  A           
RESUME_ANS               NUM      00000007  A           
RESUME_BOOT_REQ          NUM      00000005  A           
SCRL1_VRAM               NUM      00009000  A           
SCRL2_VRAM               NUM      00009800  A           
SCRL_PRIO_ADR            NUM      00008030  A           
SCRL_X1_ADR              NUM      00008032  A           
SCRL_X2_ADR              NUM      00008034  A           
SCRL_Y1_ADR              NUM      00008033  A           
SCRL_Y2_ADR              NUM      00008035  A           
SCROLL1_CRAM             NUM      00008280  A           
SCROLL2_CRAM             NUM      00008300  A           
SPRITE_CRAM              NUM      00008200  A           
SPR_OFFSET_X_ADR
                         NUM      00008020  A           
SPR_OFFSET_Y_ADR
                         NUM      00008021  A           
SPR_PALCODE              NUM      00008C00  A           
SPR_VRAM                 NUM      00008800  A           
STS_RG_ADD               NUM      00008010  A           
SYS_FAILURE              NUM      000000FF  A           
SYS_SUCCESS              NUM      00000000  A           
Sys_lever                NUM      00006F82  A           
TIMER_SHUTDOWN_ANS
                         NUM      00000006  A           
TIME_SHUTDOWN_REQ
                         NUM      00000006  A           
User_Answer              NUM      00006F86  A           
User_Boot                NUM      00006F84  A           
User_Shutdown            NUM      00006F85  A           
VECT_ALARMDOWNSET
                         NUM      0000000B  A           
VECT_ALARMSET            NUM      00000009  A           
VECT_CLOCKGEARSET
                         NUM      00000001  A           
VECT_FLASHALLERS
                         NUM      00000007  A           
VECT_FLASHERS            NUM      00000008  A           
VECT_FLASHPROTECT
                         NUM      0000000D  A           
VECT_FLASHWRITE          NUM      00000006  A           
VECT_GEMODESET           NUM      0000000E  A           
VECT_INTLVSET            NUM      00000004  A           
VECT_RTCGET              NUM      00000002  A           
VECT_SHUTDOWN            NUM      00000000  A           
VECT_SYSFONTSET          NUM      00000005  A           
VERSION_ADD              NUM      000087FE  A           
WDCR                     NUM      0000006F  A           
WD_CLR                   NUM      0000004E  A           
WD_LCDST_HPOS            NUM      00008008  A           
WD_LCDST_VPOS            NUM      00008009  A           
WINDOW_CRAM              NUM      000083F0  A           
WIN_WBAX_ADR             NUM      00008002  A           
WIN_WBAY_ADR             NUM      00008003  A           
WIN_WSIX_ADR             NUM      00008004  A           
WIN_WSIY_ADR             NUM      00008005  A           
_ALARM_BOOT_REQ          NUM      00000080  A           
_BAT_SHUTDOWN_REQ
                         NUM      00000020  A           
_INT_CLR_BIT             NUM      00000080  A           
_MP_SHUTDOWN_REQ
                         NUM      00000080  A           
_POWER_BOOT_REQ          NUM      00000040  A           
_RESUME_ANS              NUM      00000080  A           
_RESUME_BOOT_REQ
                         NUM      00000020  A           
_TIMER_SHUTDOWN_ANS
                         NUM      00000040  A           
_TIME_SHUTDOWN_REQ
                         NUM      00000040  A           
disp_size_x              NUM      000000A0  A           
disp_size_y              NUM      00000098  A           
init                     MOD
init_setting     C L     LAB      00000000  R PUB       PROG
obj_max                  NUM      00000040  A           
pal_data         C L     LAB      000000AD  R           PROG
palet_loop       C L     LAB      0000009C  R           PROG
plaet_seting     C L     LAB      00000090  R           PROG
scroll_clr       C L     LAB      0000007A  R           PROG
scroll_loop      C L     LAB      00000082  R           PROG
sprite_clr       C L     LAB      00000066  R           PROG
sprite_loop      C L     LAB      00000070  R           PROG
start_work                        00000000  R EXT       
vect_copy        C L     LAB      0000000F  R           PROG
work_init_loop   C L     LAB      00000056  R           PROG


TOTAL
  119 user defined symbol(s)
    9 unreferenced external symbol(s)
